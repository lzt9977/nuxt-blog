{"version":3,"sources":["webpack:///webpack/bootstrap eccd7c47bc345666a21b","webpack:///./node_modules/_babel-runtime@6.26.0@babel-runtime/regenerator/index.js","webpack:///./server/config/index.js","webpack:///./server/utils/response.js","webpack:///external \"mongoose\"","webpack:///./server/models/articles.js","webpack:///external \"chalk\"","webpack:///./server/models/users.js","webpack:///./server/index.js","webpack:///external \"koa\"","webpack:///external \"nuxt\"","webpack:///./server/config/errorCode.js","webpack:///./server/middlewares.js","webpack:///external \"regenerator-runtime\"","webpack:///external \"koa-static\"","webpack:///external \"koa-bodyparser\"","webpack:///./server/routes.js","webpack:///./server/controllers/articles.js","webpack:///./server/controllers/login.js","webpack:///external \"jsonwebtoken\"","webpack:///./server/controllers/logout.js","webpack:///./server/controllers/reg.js","webpack:///./server/controllers/articleDetail.js","webpack:///external \"koa-jwt\"","webpack:///external \"koa-router\"","webpack:///./server/models/index.js","webpack:///./nuxt.config.js"],"names":["console","log","dbname","app","name","version","database","driver","host","port","username","password","options","server","static_dir","root","session","secretKey","secret","errorCode","code","data","chalk","yellow","msg","config","model","title","type","String","index","unique","articleId","Number","content","tag","category","createTime","author","pv","uid","updateTime","default","Date","now","mongoose","process","env","HOST","PORT","nuxtConfig","require","dev","nuxt","builder","build","catch","error","e","exit","middlewares","use","ctx","status","Promise","resolve","reject","res","on","render","req","promise","then","listen","router","routes","allowedMethods","jwtKoa","unless","path","next","headersSent","throw","body","message","emit","serve","bodyParser","prefix","post","request","page","articles","Articles","find","skip","pageSize","limit","articlesList","count","articlesSize","list","map","item","length","substring","total","Users","findOne","userInfo","token","jwt","sign","expiresIn","cookies","set","err","where","isUser","create","dblink","connect","db","connection","red","once","green","module","exports","head","meta","charset","hid","HOST_URL","css","src","lang","modules","plugins","loading","color","height","vendor","babel","libraryName","styleLibraryName"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap eccd7c47bc345666a21b","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_babel-runtime@6.26.0@babel-runtime/regenerator/index.js\n// module id = 0\n// module chunks = 0","import errorCode from './errorCode'\nconsole.log(process.env.NODE_ENV)\nconst dbname = process.env.NODE_ENV === 'development' ? 'user' : 'koa'\n\nexport default {\n  app: {\n    name: 'something',\n    version: '1.0.0'\n  },\n  database: {\n    driver: 'mongo',\n    host: '127.0.0.1',\n    port: 27017,\n    dbname: dbname,\n    username: 'admin',\n    password: '123456',\n    options: {\n    }\n  },\n  server: {\n    port: 3000\n  },\n  static_dir: {\n    root: './static',\n    options: {}\n  },\n  session: {\n    secretKey: 'something'\n  },\n  secret: 'qweqwqw',\n  errorCode\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/config/index.js","import config from '../config'\nimport chalk from 'chalk'\n\nexport default (code, data = {}) => {\n  console.log(chalk.yellow(`ErrorCode：${code}`))\n  return {\n    code: code,\n    data,\n    msg: config.errorCode[code]\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/response.js","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 3\n// module chunks = 0","import mongoose from 'mongoose'\nconst model = {\n  // 文章标题\n  title: {\n    type: String,\n    index: {\n      unique: true,\n    },\n  },\n  // 文章id\n  articleId: {\n    type: Number,\n    index: {\n      unique: true,\n    },\n  },\n  // 内容\n  content: {\n    type: String,\n  },\n  // 标签\n  tag: {\n    type: String,\n    index: true,\n  },\n  // 分类\n  category: {\n    type: String,\n    index: true,\n  },\n  // 创建时间\n  createTime: {\n    type: String,\n  },\n  // 作者\n  author: {\n    type: String,\n  },\n  // 文章浏览量\n  pv: {\n    type: Number,\n  },\n  // 发布文章的用户id\n  uid: {\n    type: Number,\n    index: true,\n  },\n  // 更新时间\n  updateTime: {\n    type: String,\n    default: Date.now()\n  },\n}\n\nexport default mongoose.model('Articles', model)\n\n\n// WEBPACK FOOTER //\n// ./server/models/articles.js","module.exports = require(\"chalk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"chalk\"\n// module id = 5\n// module chunks = 0","import mongoose from 'mongoose'\n\nconst model = {\n  username: {\n    type: String,\n    index: {\n      unique: true,\n    },\n  },\n  password: String\n}\n\nexport default mongoose.model('Users', model)\n\n\n// WEBPACK FOOTER //\n// ./server/models/users.js","import Koa from 'koa'\nimport { Nuxt, Builder } from 'nuxt'\nimport config from './config'\nimport middlewares from './middlewares'\n\nimport './models'\n\nconst app = new Koa()\nconst host = process.env.HOST || '127.0.0.1'\nconst port = process.env.PORT || config.server.port\n\n// Import and Set Nuxt.js options\nlet nuxtConfig = require('../nuxt.config.js')\nnuxtConfig.dev = !(app.env === 'production')\n\n// Instantiate nuxt.js\nconst nuxt = new Nuxt(nuxtConfig)\n\n// Build in development\nif (nuxtConfig.dev) {\n  const builder = new Builder(nuxt)\n  builder.build().catch(e => {\n    console.error(e) // eslint-disable-line no-console\n    process.exit(1)\n  })\n}\n\n// Middlewares are imported here.\nmiddlewares(app)\n\n// Hook Nuxt up!\n// https://github.com/nuxt-community/koa-template/blob/master/template/server/index.js\napp.use(ctx => {\n  ctx.status = 200 // koa defaults to 404 when it sees that status is unset\n\n  return new Promise((resolve, reject) => {\n    ctx.res.on('close', resolve)\n    ctx.res.on('finish', resolve)\n    nuxt.render(ctx.req, ctx.res, promise => {\n      // nuxt.render passes a rejected promise into callback on error.\n      promise.then(resolve).catch(reject)\n    })\n  })\n})\n\napp.listen(port, host)\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 9\n// module chunks = 0","export default {\n  0: '请求成功',\n  '-1': '系统错误',\n  100: '用户名或密码填写有误',\n  101: '该用户名已存在',\n  200: '分页参数错误'\n}\n\n\n// WEBPACK FOOTER //\n// ./server/config/errorCode.js","import serve from 'koa-static'\nimport bodyParser from 'koa-bodyparser'\nimport config from './config'\nimport routes from './routes'\nimport jwtKoa from 'koa-jwt'\nimport Router from 'koa-router'\n\nexport default (app) => {\n  const router = new Router()\n\n  router.use('', routes.routes())\n\n  app\n  .use(router.routes())\n  .use(router.allowedMethods())\n\n  app.use(jwtKoa({\n    secret: config.secret\n  }).unless({\n    path: [\n      /^(?!\\/personal).*/\n    ]\n  }))\n\n  app.use(async (ctx, next) => {\n    try {\n      await next()\n\n      // Handle 404 - throw it as an error.\n      if (ctx.status === 404 && ctx.res.headersSent === false) {\n        ctx.throw(404)\n      }\n\n      if (ctx.status === 200 && ctx.res.headersSent === false) {\n        ctx.body = {\n          status: 200,\n          data: ctx.body\n        }\n      }\n    } catch (err) {\n      ctx.status = err.status || 500\n\n      ctx.type = 'json'\n      ctx.body = {\n        status: ctx.status,\n        message: err.message\n      }\n\n      ctx.app.emit('error', err, ctx)\n    }\n  })\n\n  app.use(serve(config.static_dir.root))\n\n  app.use(bodyParser())\n\n  // auth check\n\n\n  // Add routes by group.\n  // const mount = require('koa-mount')\n  // app.use(mount('/api', routes()))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/middlewares.js","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"koa-static\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-static\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"koa-bodyparser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-bodyparser\"\n// module id = 14\n// module chunks = 0","// import Router from 'koa-trie-router'\n//\n// const router = new Router()\n//\n// import articles from './controllers/articles'\n// import login from './controllers/login'\n// import logout from './controllers/logout'\n// import reg from './controllers/reg'\n// import articleDetail from './controllers/articleDetail'\n//\n// export default () => {\n//\n//   router.post('/getArticlesList', articles)\n//   router.post('/login', login)\n//   router.post('/logout', logout)\n//   router.post('/reg', reg)\n//   router.post('/getArticleDetail', articleDetail)\n//\n//   return router.middleware()\n//\n// }\n\nimport Router from 'koa-router'\nimport articles from './controllers/articles'\nimport login from './controllers/login'\nimport logout from './controllers/logout'\nimport reg from './controllers/reg'\nimport articleDetail from './controllers/articleDetail'\n\nconst router = new Router({\n  prefix: '/api'\n})\n\nrouter.post('/getArticlesList', articles)\nrouter.post('/login', login)\nrouter.post('/logout', logout)\nrouter.post('/reg', reg)\nrouter.post('/getArticleDetail', articleDetail)\n\nexport default router\n\n\n// WEBPACK FOOTER //\n// ./server/routes.js","import Articles from '../models/articles'\nimport errorCode from '../utils/response'\n\nexport default async (ctx, next) => {\n  try{\n    const { body } = ctx.request\n\n    if(body.page <= 0){\n      ctx.body = errorCode(200)\n      return await next()\n    }\n\n    const articles = Articles.find()\n    const articlesList = await articles.skip((body.page - 1) * body.pageSize).limit(body.pageSize)\n    const articlesSize = await articles.count()\n\n    const list = articlesList.map(item => {\n      item.content = item.content.length > 150 ? `${item.content.substring(0,150)}...` : item.content\n      return item\n    })\n\n    ctx.body = errorCode(0, {\n      list: list,\n      total: articlesSize,\n      pageSize: body.pageSize\n    })\n\n  }catch(err)\n  {\n    ctx.body = errorCode(-1)\n    throw err\n  }\n\n  await next()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/articles.js","import Users from '../models/users'\nimport errorCode from '../utils/response'\nimport jwt from 'jsonwebtoken'\nimport config from '../config'\n\nexport default async (ctx, next) => {\n  const { body } = ctx.request\n  try {\n    const userInfo = await Users.findOne({username: body.username})\n    if(body.username === userInfo.username && body.password === userInfo.password){\n\n      const token = jwt.sign({\n        username: body.username\n      }, config.secret, {\n        expiresIn: '1h'\n      })\n\n      ctx.cookies.set('token', token)\n\n      ctx.body = errorCode(0, token)\n\n    }else{\n      ctx.body = errorCode(100)\n    }\n\n  }catch (err) {\n    ctx.body = errorCode(-1)\n    throw err\n  }\n  await next()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/login.js","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 18\n// module chunks = 0","import errorCode from '../utils/response'\n\nexport default async (ctx, next) => {\n  ctx.session = null\n\n  try {\n    ctx.body = errorCode(0)\n  }catch (err) {\n    ctx.body = errorCode(-1)\n  }\n\n  await next()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/logout.js","import Users from '../models/users'\nimport errorCode from '../utils/response'\n\nexport default async (ctx, next) => {\n  try{\n    const isUser = await Users.find().where('username', ctx.request.body.username)\n\n    if(!ctx.request.body.username || !ctx.request.body.password) {\n      ctx.body = errorCode(100)\n\n      return await next()\n    }\n\n    if(isUser.length){\n      ctx.body = errorCode(101)\n    }else{\n      await Users.create(ctx.request.body).then(() => {\n        ctx.body = errorCode(0)\n      })\n    }\n  }catch (err) {\n    ctx.body = errorCode(-1)\n    throw err\n  }\n\n  await next()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/reg.js","import Articles from '../models/articles'\nimport errorCode from '../utils/response'\n\nexport default async (ctx, next) => {\n  try{\n    const { body } = ctx.request\n\n    const articles = await Articles.findOne({articleId: body.articleId})\n\n    ctx.body = errorCode(0, articles)\n\n  }catch(err)\n  {\n    ctx.body = errorCode(-1)\n  }\n\n  await next()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/articleDetail.js","module.exports = require(\"koa-jwt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-jwt\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 23\n// module chunks = 0","import mongoose from 'mongoose'\nimport chalk from 'chalk'\nconst log = console.log\nimport config from '../config'\n\nconst dblink = `mongodb://${config.database.host}:${config.database.port}/${config.database.dbname}`\n\nconsole.log(dblink)\n\nmongoose.connect(`mongodb://${config.database.host}:${config.database.port}/${config.database.dbname}`)\n\nconst db = mongoose.connection\n\ndb.on('error', () => {\n  log(chalk.red('connection error:'))\n})\n\ndb.once('open', async () => {\n  log(chalk.green('mongodb connected!'))\n})\n\n\n// WEBPACK FOOTER //\n// ./server/models/index.js","// https://nuxtjs.org/api/configuration-build\nmodule.exports = {\n  /*\n  ** Headers of the page\n  */\n  head: {\n    title: 'nuxt-blog',\n    meta: [\n      { charset: 'utf-8' },\n      { name: 'viewport', content: 'width=device-width, initial-scale=1' },\n      { hid: 'description', name: 'description', content: 'nuxt-blog' }\n    ]\n  },\n  env: {\n    HOST_URL: process.env.HOST_URL || 'http://127.0.0.1:3000'\n  },\n  /*\n  ** Global CSS\n  */\n  css: [\n    'element-ui/lib/theme-chalk/index.css',\n    { src: '~/assets/sass/main.scss', lang: 'scss' }\n  ],\n  modules: [\n    '@nuxtjs/axios',\n    '@nuxtjs/proxy',\n  ],\n  plugins: ['~plugins/element-ui'],\n  loading: {\n    color: '#ff7e79',\n    height: '3px'\n  },\n  build: {\n    vendor: [\n      'element-ui',\n      'axios',\n      '~/plugins/fetch.js',\n      'moment'\n    ],\n  },\n  babel: {\n    plugins: [\n      [\n        'component', [\n        {\n          libraryName: 'element-ui',\n          styleLibraryName: 'theme-default',\n        }]]],\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js"],"sourceRoot":""}