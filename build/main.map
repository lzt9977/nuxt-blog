{"version":3,"sources":["webpack:///webpack/bootstrap 4ee7977dda3ba330efcf","webpack:///./node_modules/_babel-runtime@6.26.0@babel-runtime/regenerator/index.js","webpack:///./server/config/index.js","webpack:///external \"mongoose\"","webpack:///external \"koa-router\"","webpack:///./server/utils/response.js","webpack:///external \"chalk\"","webpack:///./server/index.js","webpack:///external \"regenerator-runtime\"","webpack:///external \"koa\"","webpack:///external \"nuxt\"","webpack:///./server/config/errorCode.js","webpack:///./server/middlewares.js","webpack:///external \"koa-static\"","webpack:///external \"koa-bodyparser\"","webpack:///./server/routes.js","webpack:///./server/controllers/articles.js","webpack:///./server/models/articles.js","webpack:///./server/controllers/user.js","webpack:///./server/models/users.js","webpack:///external \"jsonwebtoken\"","webpack:///external \"bcrypt\"","webpack:///external \"koa-jwt\"","webpack:///./server/models/index.js","webpack:///./nuxt.config.js"],"names":["console","log","dbname","app","name","version","database","driver","host","port","username","password","options","server","static_dir","root","session","secretKey","secret","md5Key","errorCode","code","data","chalk","yellow","msg","config","process","env","HOST","PORT","start","nuxtConfig","require","dev","middlewares","nuxt","builder","build","use","ctx","next","status","Promise","resolve","reject","res","on","render","req","promise","then","catch","listen","router","routes","jwtKoa","unless","path","headersSent","throw","body","type","message","emit","serve","bodyParser","allowedMethods","prefix","post","getArticleList","request","page","articles","Articles","find","sort","createTime","skip","pageSize","limit","articlesList","count","articlesSize","list","map","item","content","length","substring","total","getArticleDetail","findOne","articleId","model","title","String","index","unique","Number","tag","category","author","pv","uid","updateTime","default","Date","now","mongoose","login","Users","userInfo","passCorrect","bcrypt","compareSync","token","jwt","sign","expiresIn","cookies","set","reg","where","isUser","salt","genSaltSync","create","hashSync","logout","err","dblink","connect","db","connection","red","once","green","module","exports","head","meta","charset","hid","HOST_URL","css","src","lang","modules","plugins","loading","color","height","vendor","babel","libraryName","styleLibraryName"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4ee7977dda3ba330efcf","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_babel-runtime@6.26.0@babel-runtime/regenerator/index.js\n// module id = 0\n// module chunks = 0","import errorCode from './errorCode'\nconsole.log(process.env.NODE_ENV)\nconst dbname = process.env.NODE_ENV === 'development' ? 'user' : 'koa'\n\nexport default {\n  app: {\n    name: 'something',\n    version: '1.0.0'\n  },\n  database: {\n    driver: 'mongo',\n    host: '127.0.0.1',\n    port: 27017,\n    dbname: dbname,\n    username: 'admin',\n    password: '123456',\n    options: {\n    }\n  },\n  server: {\n    port: 3000\n  },\n  static_dir: {\n    root: './static',\n    options: {}\n  },\n  session: {\n    secretKey: 'something'\n  },\n  secret: 'qweqwqw',\n  md5Key: 'this is md5 key',\n  errorCode\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/config/index.js","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 3\n// module chunks = 0","import config from '../config'\nimport chalk from 'chalk'\n\nexport default (code, data = {}) => {\n  console.log(chalk.yellow(`ErrorCode：${code}`))\n  return {\n    code: code,\n    data,\n    msg: config.errorCode[code]\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/response.js","module.exports = require(\"chalk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"chalk\"\n// module id = 5\n// module chunks = 0","import Koa from 'koa'\nimport { Nuxt, Builder } from 'nuxt'\nimport config from './config'\nimport middlewares from './middlewares'\n\nimport './models'\n\nconst app = new Koa()\nconst host = process.env.HOST || '127.0.0.1'\nconst port = process.env.PORT || config.server.port\n\nconst start = async () => {\n  // Import and Set Nuxt.js options\n  let nuxtConfig = require('../nuxt.config.js')\n  nuxtConfig.dev = !(app.env === 'production')\n\n// Instantiate nuxt.js\n\n\n// Middlewares are imported here.\n  middlewares(app)\n\n  const nuxt = new Nuxt(nuxtConfig)\n\n  if (nuxtConfig.dev) {\n    const builder = new Builder(nuxt)\n    await builder.build()\n  }\n\n  app.use(async (ctx, next) => {\n    await next()\n    ctx.status = 200 // koa defaults to 404 when it sees that status is unset\n\n    return new Promise((resolve, reject) => {\n      ctx.res.on('close', resolve)\n      ctx.res.on('finish', resolve)\n      nuxt.render(ctx.req, ctx.res, promise => {\n        // nuxt.render passes a rejected promise into callback on error.\n        promise.then(resolve).catch(reject)\n      })\n    })\n  })\n\n  app.listen(port, host)\n}\n\nstart()\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 9\n// module chunks = 0","export default {\n  0: '请求成功',\n  '-1': '系统错误',\n  100: '用户名或密码填写有误',\n  101: '该用户名已存在',\n  200: '分页参数错误'\n}\n\n\n// WEBPACK FOOTER //\n// ./server/config/errorCode.js","import serve from 'koa-static'\nimport bodyParser from 'koa-bodyparser'\nimport config from './config'\nimport routes from './routes'\nimport jwtKoa from 'koa-jwt'\nimport Router from 'koa-router'\n// import cors from '@koa/cors'\n\nexport default (app) => {\n  const router = new Router()\n\n  router.use('', routes.routes())\n\n  // app.use(cors())\n\n  app.use(jwtKoa({\n    secret: config.secret\n  }).unless({\n    path: [\n      /^(?!\\/api).*/,\n      /^\\/api\\/login/,\n      /^\\/api\\/reg/,\n      /^\\/api\\/getArticlesList/,\n      /^\\/api\\/getArticleDetail/,\n    ]\n  }))\n\n  app.use(async (ctx, next) => {\n    try {\n      await next()\n\n      // Handle 404 - throw it as an error.\n      if (ctx.status === 404 && ctx.res.headersSent === false) {\n        ctx.throw(404)\n      }\n\n      if (ctx.status === 200 && ctx.res.headersSent === false) {\n        ctx.body = {\n          status: 200,\n          data: ctx.body\n        }\n      }\n    } catch (err) {\n      ctx.status = err.status || 500\n\n      ctx.type = 'json'\n      ctx.body = {\n        status: ctx.status,\n        message: err.message\n      }\n\n      ctx.app.emit('error', err, ctx)\n    }\n  })\n\n  app.use(serve(config.static_dir.root))\n\n  app.use(bodyParser())\n\n  app\n  .use(router.routes())\n  .use(router.allowedMethods())\n\n  // auth check\n\n\n  // Add routes by group.\n  // const mount = require('koa-mount')\n  // app.use(mount('/api', routes()))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/middlewares.js","module.exports = require(\"koa-static\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-static\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"koa-bodyparser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-bodyparser\"\n// module id = 13\n// module chunks = 0","import Router from 'koa-router'\nimport * as articles from './controllers/articles'\nimport * as user from './controllers/user'\n\nconst router = new Router({\n  prefix: '/api'\n})\n\nrouter.post('/getArticlesList', articles.getArticleList)\nrouter.post('/login', user.login)\nrouter.post('/logout', user.logout)\nrouter.post('/reg', user.reg)\nrouter.post('/getArticleDetail', articles.getArticleDetail)\n\nexport default router\n\n\n// WEBPACK FOOTER //\n// ./server/routes.js","import Articles from '../models/articles'\nimport errorCode from '../utils/response'\n\nexport const getArticleList =  async ctx => {\n  try{\n    const { body } = ctx.request\n\n    if(body.page <= 0){\n      ctx.body = errorCode(200)\n      return await next()\n    }\n\n    const articles = Articles.find()\n    const articlesList = await articles.sort({ createTime: -1 }).skip((body.page - 1) * body.pageSize).limit(body.pageSize)\n    const articlesSize = await articles.count()\n\n    const list = articlesList.map(item => {\n      item.content = item.content.length > 150 ? `${item.content.substring(0,150)}...` : item.content\n      return item\n    })\n\n    ctx.body = errorCode(0, {\n      list: list,\n      total: articlesSize,\n      pageSize: body.pageSize\n    })\n\n  }catch(err)\n  {\n    ctx.body = errorCode(-1)\n    throw err\n  }\n}\n\nexport const getArticleDetail = async ctx => {\n  try{\n    const { body } = ctx.request\n\n    const articles = await Articles.findOne({articleId: body.articleId})\n\n    ctx.body = errorCode(0, articles)\n\n  }catch(err)\n  {\n    ctx.body = errorCode(-1)\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/articles.js","import mongoose from 'mongoose'\nconst model = {\n  // 文章标题\n  title: {\n    type: String,\n    index: {\n      unique: true,\n    },\n  },\n  // 文章id\n  articleId: {\n    type: Number,\n    index: {\n      unique: true,\n    },\n  },\n  // 内容\n  content: {\n    type: String,\n  },\n  // 标签\n  tag: {\n    type: String,\n    index: true,\n  },\n  // 分类\n  category: {\n    type: String,\n    index: true,\n  },\n  // 创建时间\n  createTime: {\n    type: String,\n  },\n  // 作者\n  author: {\n    type: String,\n  },\n  // 文章浏览量\n  pv: {\n    type: Number,\n  },\n  // 发布文章的用户id\n  uid: {\n    type: Number,\n    index: true,\n  },\n  // 更新时间\n  updateTime: {\n    type: String,\n    default: Date.now()\n  },\n}\n\nexport default mongoose.model('Articles', model)\n\n\n// WEBPACK FOOTER //\n// ./server/models/articles.js","import Users from '../models/users'\nimport errorCode from '../utils/response'\nimport jwt from 'jsonwebtoken'\nimport config from '../config'\nimport bcrypt from 'bcrypt'\n\nexport const login = async ctx => {\n  const { body } = ctx.request\n  try {\n    const userInfo = await Users.findOne({username: body.username})\n\n    const passCorrect = bcrypt.compareSync(body.password, userInfo.password)\n\n    if(body.username === userInfo.username && passCorrect){\n\n      const token = jwt.sign({\n        username: body.username\n      }, config.secret, {\n        expiresIn: '1h'\n      })\n\n      ctx.cookies.set('token', token)\n\n      ctx.body = errorCode(0, token)\n\n    }else{\n      ctx.body = errorCode(100)\n    }\n\n  }catch (err) {\n    ctx.body = errorCode(-1)\n    throw err\n  }\n}\n\nexport const reg = async ctx => {\n  try{\n    const isUser = await Users.find().where('username', ctx.request.body.username)\n\n    if(!ctx.request.body.username || !ctx.request.body.password) {\n      ctx.body = errorCode(100)\n\n      return await next()\n    }\n\n    if(isUser.length){\n      ctx.body = errorCode(101)\n    }else{\n      const salt = bcrypt.genSaltSync(10)\n\n      await Users.create({\n        username: ctx.request.body.username,\n        password: bcrypt.hashSync(ctx.request.body.password, salt)\n      }).then(() => {\n        ctx.body = errorCode(0)\n      })\n    }\n\n  }catch (err) {\n    ctx.body = errorCode(-1)\n    throw err\n  }\n}\n\nexport const logout = ctx => {\n  ctx.session = null\n\n  try {\n    ctx.body = errorCode(0)\n  }catch (err) {\n    ctx.body = errorCode(-1)\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/user.js","import mongoose from 'mongoose'\n\nconst model = {\n  username: {\n    type: String,\n    index: {\n      unique: true,\n    },\n  },\n  password: String,\n}\n\nexport default mongoose.model('Users', model)\n\n\n// WEBPACK FOOTER //\n// ./server/models/users.js","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 19\n// module chunks = 0","module.exports = require(\"bcrypt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcrypt\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"koa-jwt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-jwt\"\n// module id = 21\n// module chunks = 0","import mongoose from 'mongoose'\nimport chalk from 'chalk'\nconst log = console.log\nimport config from '../config'\n\nconst dblink = `mongodb://${config.database.host}:${config.database.port}/${config.database.dbname}`\n\nconsole.log(dblink)\n\nmongoose.connect(`mongodb://${config.database.host}:${config.database.port}/${config.database.dbname}`)\n\nconst db = mongoose.connection\n\ndb.on('error', () => {\n  log(chalk.red('connection error:'))\n})\n\ndb.once('open', async () => {\n  log(chalk.green('mongodb connected!'))\n})\n\n\n// WEBPACK FOOTER //\n// ./server/models/index.js","// https://nuxtjs.org/api/configuration-build\nmodule.exports = {\n  /*\n  ** Headers of the page\n  */\n  head: {\n    title: 'nuxt-blog',\n    meta: [\n      { charset: 'utf-8' },\n      { name: 'viewport', content: 'width=device-width, initial-scale=1' },\n      { hid: 'description', name: 'description', content: 'nuxt-blog' }\n    ]\n  },\n  env: {\n    HOST_URL: process.env.HOST_URL || 'http://127.0.0.1:3000'\n  },\n  /*\n  ** Global CSS\n  */\n  css: [\n    'element-ui/lib/theme-chalk/index.css',\n    { src: '~/assets/sass/main.scss', lang: 'scss' }\n  ],\n  modules: [\n    '@nuxtjs/axios',\n    '@nuxtjs/proxy',\n  ],\n  plugins: ['~plugins/element-ui'],\n  loading: {\n    color: '#ff7e79',\n    height: '3px'\n  },\n  build: {\n    vendor: [\n      'element-ui',\n      'axios',\n      '~/plugins/fetch.js',\n      'moment'\n    ],\n  },\n  babel: {\n    plugins: [\n      [\n        'component', [\n        {\n          libraryName: 'element-ui',\n          styleLibraryName: 'theme-default',\n        }]]],\n  },\n}\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js"],"sourceRoot":""}