{"version":3,"sources":["webpack:///webpack/bootstrap c4521f64bb6061b77036","webpack:///./server/config/index.js","webpack:///./node_modules/_babel-runtime@6.26.0@babel-runtime/regenerator/index.js","webpack:///external \"mongoose\"","webpack:///./server/utils/response.js","webpack:///external \"koa-router\"","webpack:///./server/models/users.js","webpack:///external \"chalk\"","webpack:///external \"jsonwebtoken\"","webpack:///./server/index.js","webpack:///external \"regenerator-runtime\"","webpack:///external \"koa\"","webpack:///external \"nuxt\"","webpack:///./server/config/errorCode.js","webpack:///./server/middlewares.js","webpack:///external \"koa-static\"","webpack:///external \"koa-bodyparser\"","webpack:///./server/routes.js","webpack:///./server/controllers/articles.js","webpack:///./server/models/articles.js","webpack:///./server/controllers/user.js","webpack:///external \"bcrypt\"","webpack:///external \"koa-jwt\"","webpack:///external \"koa-logger\"","webpack:///./server/models/index.js","webpack:///./nuxt.config.js"],"names":["console","log","dbname","app","name","version","database","driver","host","port","username","password","options","server","static_dir","root","session","secretKey","secret","md5Key","errorCode","code","data","chalk","yellow","msg","config","model","type","String","index","unique","mongoose","process","env","HOST","PORT","start","nuxtConfig","require","dev","middlewares","nuxt","builder","build","use","ctx","next","status","Promise","resolve","reject","res","on","render","req","promise","then","catch","listen","router","routes","logger","jwtKoa","unless","path","body","headersSent","throw","message","emit","serve","bodyParser","allowedMethods","prefix","post","getArticleList","request","page","articles","Articles","find","sort","createTime","skip","pageSize","limit","articlesList","count","articlesSize","list","map","item","content","length","substring","total","getArticleDetail","findOne","_id","articleId","publishArticle","token","header","authorization","split","jwt","verify","err","decoded","title","user","Users","create","Date","getTime","author","uid","tag","default","category","pv","Number","updateTime","now","login","userInfo","passCorrect","bcrypt","compareSync","sign","expiresIn","cookies","set","reg","where","isUser","salt","genSaltSync","hashSync","logout","dblink","connect","db","connection","red","once","green","module","exports","head","meta","charset","hid","HOST_URL","css","src","lang","modules","plugins","loading","color","height","vendor","babel","libraryName","styleLibraryName","middleware","transition","mode"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c4521f64bb6061b77036","import errorCode from './errorCode'\nconsole.log(process.env.NODE_ENV)\nconst dbname = process.env.NODE_ENV === 'development' ? 'user' : 'koa'\n\nexport default {\n  app: {\n    name: 'something',\n    version: '1.0.0'\n  },\n  database: {\n    driver: 'mongo',\n    host: '127.0.0.1',\n    port: 27017,\n    dbname: 'user',\n    username: 'admin',\n    password: '123456',\n    options: {\n    }\n  },\n  server: {\n    port: 3000\n  },\n  static_dir: {\n    root: './static',\n    options: {}\n  },\n  session: {\n    secretKey: 'something'\n  },\n  secret: 'qweqwqw',\n  md5Key: 'this is md5 key',\n  errorCode\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/config/index.js","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_babel-runtime@6.26.0@babel-runtime/regenerator/index.js\n// module id = 1\n// module chunks = 0","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 2\n// module chunks = 0","import config from '../config'\nimport chalk from 'chalk'\n\nexport default (code, data = {}) => {\n  console.log(chalk.yellow(`ErrorCode：${code}`))\n  return {\n    code: code,\n    data,\n    msg: config.errorCode[code]\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/utils/response.js","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 4\n// module chunks = 0","import mongoose from 'mongoose'\n\nconst model = {\n  username: {\n    type: String,\n    index: {\n      unique: true,\n    },\n  },\n  password: String,\n}\n\nexport default mongoose.model('Users', model)\n\n\n// WEBPACK FOOTER //\n// ./server/models/users.js","module.exports = require(\"chalk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"chalk\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 7\n// module chunks = 0","import Koa from 'koa'\nimport { Nuxt, Builder } from 'nuxt'\nimport config from './config'\nimport middlewares from './middlewares'\n\nimport './models'\n\nconst app = new Koa()\nconst host = process.env.HOST || '127.0.0.1'\nconst port = process.env.PORT || config.server.port\n\nconst start = async () => {\n  // Import and Set Nuxt.js options\n  let nuxtConfig = require('../nuxt.config.js')\n  nuxtConfig.dev = !(app.env === 'production')\n\n// Instantiate nuxt.js\n\n\n// Middlewares are imported here.\n  middlewares(app)\n\n  const nuxt = new Nuxt(nuxtConfig)\n\n  if (nuxtConfig.dev) {\n    const builder = new Builder(nuxt)\n    await builder.build()\n  }\n\n  app.use(async (ctx, next) => {\n    await next()\n    ctx.status = 200 // koa defaults to 404 when it sees that status is unset\n\n    return new Promise((resolve, reject) => {\n      ctx.res.on('close', resolve)\n      ctx.res.on('finish', resolve)\n      nuxt.render(ctx.req, ctx.res, promise => {\n        // nuxt.render passes a rejected promise into callback on error.\n        promise.then(resolve).catch(reject)\n      })\n    })\n  })\n\n  app.listen(port, host)\n}\n\nstart()\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 11\n// module chunks = 0","export default {\n  0: '请求成功',\n  '-1': '系统错误',\n  100: '用户名或密码填写有误',\n  101: '该用户名已存在',\n  200: '分页参数错误',\n  400: 'TokenError',\n  300: '参数错误',\n  600: '无效token'\n}\n\n\n// WEBPACK FOOTER //\n// ./server/config/errorCode.js","import serve from 'koa-static'\nimport bodyParser from 'koa-bodyparser'\nimport config from './config'\nimport routes from './routes'\nimport jwtKoa from 'koa-jwt'\nimport Router from 'koa-router'\nimport errorCode from './utils/response'\nimport logger from 'koa-logger'\n\nexport default (app) => {\n  const router = new Router()\n\n  router.use('', routes.routes())\n\n  // app.use(cors())\n\n  app.use(logger())\n\n  app.use(jwtKoa({\n    secret: config.secret\n  }).unless({\n    path: [\n      /^(?!\\/api).*/,\n      /^\\/api\\/login/,\n      /^\\/api\\/reg/,\n      /^\\/api\\/logout/,\n      /^\\/api\\/getArticlesList/,\n      /^\\/api\\/getArticleDetail/,\n      // /^\\/api\\/publish/,\n    ]\n  }))\n\n  app.use(async (ctx, next) => {\n    if(ctx.status === 401){\n      ctx.body = errorCode(600)\n    }\n\n    await next()\n  })\n\n  app.use(async (ctx, next) => {\n    try {\n      await next()\n\n      // Handle 404 - throw it as an error.\n      if (ctx.status === 404 && ctx.res.headersSent === false) {\n        ctx.throw(404)\n      }\n\n      if (ctx.status === 200 && ctx.res.headersSent === false) {\n        ctx.body = {\n          status: 200,\n          data: ctx.body\n        }\n      }\n    } catch (err) {\n      ctx.status = err.status || 500\n\n      ctx.type = 'json'\n      ctx.body = {\n        status: ctx.status,\n        message: err.message\n      }\n\n      ctx.app.emit('error', err, ctx)\n    }\n  })\n\n  app.use(serve(config.static_dir.root))\n\n  app.use(bodyParser())\n\n  app\n  .use(router.routes())\n  .use(router.allowedMethods())\n\n  // auth check\n\n\n  // Add routes by group.\n  // const mount = require('koa-mount')\n  // app.use(mount('/api', routes()))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/middlewares.js","module.exports = require(\"koa-static\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-static\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"koa-bodyparser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-bodyparser\"\n// module id = 15\n// module chunks = 0","import Router from 'koa-router'\nimport * as articles from './controllers/articles'\nimport * as user from './controllers/user'\n\nconst router = new Router({\n  prefix: '/api'\n})\n\nrouter.post('/getArticlesList', articles.getArticleList)\nrouter.post('/login', user.login)\nrouter.post('/logout', user.logout)\nrouter.post('/reg', user.reg)\nrouter.post('/getArticleDetail', articles.getArticleDetail)\nrouter.post('/publish', articles.publishArticle)\n\nexport default router\n\n\n// WEBPACK FOOTER //\n// ./server/routes.js","import Articles from '../models/articles'\nimport Users from '../models/users'\nimport errorCode from '../utils/response'\nimport jwt from 'jsonwebtoken'\nimport config from '../config'\n\nexport const getArticleList =  async ctx => {\n  try{\n    const { body } = ctx.request\n\n    if(body.page <= 0){\n      ctx.body = errorCode(200)\n      return await next()\n    }\n\n    const articles = Articles.find()\n    const articlesList = await articles.sort({ createTime: -1 }).skip((body.page - 1) * body.pageSize).limit(body.pageSize)\n    const articlesSize = await articles.count()\n\n    const list = articlesList.map(item => {\n      item.content = item.content.length > 150 ? `${item.content.substring(0,150)}...` : item.content\n      return item\n    })\n\n    ctx.body = errorCode(0, {\n      list: list,\n      total: articlesSize,\n      pageSize: body.pageSize\n    })\n\n  }catch(err)\n  {\n    ctx.body = errorCode(-1)\n    throw err\n  }\n}\n\nexport const getArticleDetail = async ctx => {\n  try{\n    const { body } = ctx.request\n\n    const articles = await Articles.findOne({_id: body.articleId})\n\n    ctx.body = errorCode(0, articles)\n\n  }catch(err)\n  {\n    ctx.body = errorCode(-1)\n  }\n}\n\nexport const publishArticle = async ctx => {\n  try{\n    const token = ctx.request.header.authorization.split(' ')[1]\n\n    await jwt.verify(token, config.secret, async (err, decoded) => {\n      if(err){\n        ctx.body = errorCode(400, err)\n      }else{\n        const { body } = ctx.request\n\n        if(!body.title || !body.content){\n          return ctx.body = errorCode(300)\n        }\n\n        const user = Users.findOne({username: decoded.username})\n\n        await Articles.create({\n          title: body.title,\n          content: String(body.content),\n          createTime: new Date().getTime(),\n          author: decoded.username,\n          uid: user._id\n        }).then(() => {\n          ctx.body = errorCode(0)\n        })\n      }\n    })\n\n  }catch (err) {\n    throw err\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/articles.js","import mongoose from 'mongoose'\nconst model = {\n  // 文章标题\n  title: {\n    type: String,\n    index: {\n      unique: true,\n    },\n  },\n  // // 文章id\n  // articleId: {\n  //   type: Number,\n  //   index: {\n  //     unique: true,\n  //   },\n  // },\n  // 内容\n  content: {\n    type: String,\n  },\n  // 标签\n  tag: {\n    type: String,\n    index: true,\n    default: 'js'\n  },\n  // 分类\n  category: {\n    type: String,\n    index: true,\n    default: 'js'\n  },\n  // 创建时间\n  createTime: {\n    type: String,\n  },\n  // 作者\n  author: {\n    type: String,\n  },\n  // 文章浏览量\n  pv: {\n    type: Number,\n    default: 0\n  },\n  // 发布文章的用户id\n  uid: {\n    type: Number,\n    index: true,\n  },\n  // 更新时间\n  updateTime: {\n    type: String,\n    default: Date.now()\n  },\n  // 状态\n  status: {\n    type: String,\n    //pending 待审核 pass 通过\n    default: 'pending'\n  }\n}\n\nexport default mongoose.model('Articles', model)\n\n\n// WEBPACK FOOTER //\n// ./server/models/articles.js","import Users from '../models/users'\nimport errorCode from '../utils/response'\nimport jwt from 'jsonwebtoken'\nimport config from '../config'\nimport bcrypt from 'bcrypt'\n\nexport const login = async ctx => {\n  const { body } = ctx.request\n  try {\n    const userInfo = await Users.findOne({username: body.username})\n\n    if(!userInfo){\n      return ctx.body = errorCode(100)\n    }\n\n    const passCorrect = bcrypt.compareSync(body.password, userInfo.password)\n\n    if(body.username === userInfo.username && passCorrect){\n\n      const token = jwt.sign({\n        username: body.username\n      }, config.secret, {\n        expiresIn: '1h'\n      })\n\n      ctx.cookies.set('token', token)\n\n      ctx.body = errorCode(0, token)\n\n    }else{\n      ctx.body = errorCode(100)\n    }\n\n  }catch (err) {\n    ctx.body = errorCode(-1)\n    throw err\n  }\n}\n\nexport const reg = async ctx => {\n  try{\n    const isUser = await Users.find().where('username', ctx.request.body.username)\n\n    if(!ctx.request.body.username || !ctx.request.body.password) {\n      ctx.body = errorCode(100)\n\n      return await next()\n    }\n\n    if(isUser.length){\n      ctx.body = errorCode(101)\n    }else{\n      const salt = bcrypt.genSaltSync(10)\n\n      await Users.create({\n        username: ctx.request.body.username,\n        password: bcrypt.hashSync(ctx.request.body.password, salt)\n      }).then(() => {\n        ctx.body = errorCode(0)\n      })\n    }\n\n  }catch (err) {\n    ctx.body = errorCode(-1)\n    throw err\n  }\n}\n\nexport const logout = ctx => {\n  try {\n    jwt.sign({\n      logout: 'logout'\n    }, config.secret, {\n      expiresIn: '1h'\n    })\n\n    ctx.cookies.set('token', '')\n\n    ctx.body = errorCode(0)\n  }catch (err) {\n    ctx.body = errorCode(-1)\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/user.js","module.exports = require(\"bcrypt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcrypt\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"koa-jwt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-jwt\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"koa-logger\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-logger\"\n// module id = 22\n// module chunks = 0","import mongoose from 'mongoose'\nimport chalk from 'chalk'\nconst log = console.log\nimport config from '../config'\n\nconst dblink = `mongodb://${config.database.host}:${config.database.port}/${config.database.dbname}`\n\nconsole.log(dblink)\n\nmongoose.connect(`mongodb://${config.database.host}:${config.database.port}/${config.database.dbname}`)\n\nconst db = mongoose.connection\n\ndb.on('error', () => {\n  log(chalk.red('connection error:'))\n})\n\ndb.once('open', async () => {\n  log(chalk.green('mongodb connected!'))\n})\n\n\n// WEBPACK FOOTER //\n// ./server/models/index.js","// https://nuxtjs.org/api/configuration-build\nmodule.exports = {\n  /*\n  ** Headers of the page\n  */\n  head: {\n    title: 'nuxt-blog',\n    meta: [\n      { charset: 'utf-8' },\n      { name: 'viewport', content: 'width=device-width, initial-scale=1' },\n      { hid: 'description', name: 'description', content: 'nuxt-blog' }\n    ]\n  },\n  env: {\n    HOST_URL: process.env.HOST_URL || 'http://127.0.0.1:3000'\n  },\n  /*\n  ** Global CSS\n  */\n  css: [\n    'element-ui/lib/theme-chalk/index.css',\n    { src: '~/assets/sass/main.scss', lang: 'scss' },\n    '~/assets/css/github-markdown.css'\n  ],\n  modules: [\n    '@nuxtjs/axios',\n    '@nuxtjs/proxy',\n  ],\n  plugins: ['~plugins/element-ui'],\n  loading: {\n    color: '#ff7e79',\n    height: '3px'\n  },\n  build: {\n    vendor: [\n      'element-ui',\n      'axios',\n      '~/plugins/fetch.js',\n      'moment',\n      'marked'\n    ],\n  },\n  babel: {\n    plugins: [\n      [\n        'component', [\n        {\n          libraryName: 'element-ui',\n          styleLibraryName: 'theme-default',\n        }]]],\n  },\n  router: {\n    middleware: 'authCheck'\n  },\n  transition: {\n    name: 'page',\n    mode: 'out-in'\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js"],"sourceRoot":""}